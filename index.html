<!-- Pouzite zdroje: -->

<!-- 1. Ako vytvorit HTML stranku a pripojiť ju ku SageMath serveru  -->
<!-- https://sagecell.sagemath.org/static/about.html?v=9cdf308ed88aa031fc0567a0581ac3a3 -->

<!-- 2. Ako pridať slider, imputacia matice, a zovrazenie v .tex tvare  -->
<!-- https://wiki.sagemath.org/interact/linear_algebra -->

<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>FEI KEMT SageMathCell</title>
<script src="https://sagecell.sagemath.org/static/embedded_sagecell.js"></script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<style>



body {
  font-family: Arial;
  margin: 0;
  padding: 0;
  background-color: #f4f4f4;
}
.container {
  max-width: 800px;
  margin: 20px auto;
  padding: 30px;
  background-color: #ffffff;
  border-radius: 8px;
  box-shadow: 0 0 10px rgba(0, 0, 0, 0.11);
}
h1, h2 {
  color: #333;
}
.compute {
  margin-top: 20px;
  border: 1px solid #ddddddd2;
  border-radius: 8px;
  padding: 20px;
  background-color: #ffffff;
}
footer {
  text-align: center;
  background-color: #444444;
  color: #ffffff;
  padding: 1px 0;
  position: relative;
  bottom: 0;
  width: 100%;
}
</style>
<script>
// Make the div with id 'mycell' a Sage cell
sagecell.makeSagecell({inputLocation:  '#mycell',
                       template:       sagecell.templates.minimal,
                       evalButtonText: 'Activate'});
// Make *any* div with class 'compute' a Sage cell
sagecell.makeSagecell({inputLocation: 'div.compute',
                       evalButtonText: 'Evaluate'});
</script>
</head>

<link rel="icon" href=
"https://startupcentrum.tuke.sk/wp-content/uploads/2020/07/TUKE_ZNAK_B_CMYK.png"
          type="image/x-icon">

<body>
<div class="container">
<h1>Webová stránka na riešenie sústavy lineárnych rovníc pomocou SageMathCell</h1>

<div>
    <p>Ku každej sústave lineárnych rovníc môžeme priradiť nasledujúce matice:</p>
  
    <div>
      \[
      A = \begin{pmatrix}
        a_{11} & a_{12} & \cdots & a_{1n} \\
        a_{21} & a_{22} & \cdots & a_{2n} \\
        \vdots & \vdots & \ddots & \vdots \\
        a_{m1} & a_{m2} & \cdots & a_{mn}
      \end{pmatrix}
      \]
      matica typu \( m \times n \), ktorú nazývame <b>maticou sústavy</b>
    </div>
  
    <div>
      \[
      (A|b) = \left(\begin{array}{cccc|c}
        a_{11} & a_{12} & \cdots & a_{1n} & b_{1} \\
        a_{21} & a_{22} & \cdots & a_{2n} & b_{2} \\
        \vdots & \vdots & \ddots & \vdots & \vdots \\
        a_{m1} & a_{m2} & \cdots & a_{mn} & b_{m}
      \end{array}\right)
      \]
      alebo <b>rozšírenú maticu sústavy</b>, označovať budeme $(A|b)$
    </div>
  </div>
  

<h2>Funkcia solve()</h2>

<div class="compute">
    <script type="text/x-sage">
from sage.misc.html import HtmlFragment

@interact
def _(n=slider(1, 10, 1, 3)): 
    D = Integer(n)
    example = [[1 if k == j else 0 for k in range(D + 1)] for j in range(D)]
    example[0][-1] = 0
    example[-1][0] = 0
    pretty_print(HtmlFragment('<div style="text-align: center;">Zadajte koeficienty rozšírenej matice sústavy $(A|b)$</div>'))
    
    #Reťazec písmen veľkosti matice
    var_list = ','.join(chr(97 + i) for i in range(D))

    @interact
    def inner(A=input_grid(D, D + 1, default=example, label='$(A|b)$ =', to_value=matrix), auto_update=False):
        var(var_list)
        eqs = []
        pretty_print(HtmlFragment('Sústava lineárnych rovníc (SLR)'))
        for i in range(D):
            eq = sum([A[i][j] * var(chr(97 + j)) for j in range(D)]) == A[i][-1]
            show(eq)            
            eqs.append(eq)   
        solutions = solve(eqs, [var(chr(97 + i)) for i in range(D)])  # Solve the system of equations dynamically
        if solutions:
            pretty_print(HtmlFragment("Riešenie SLR $=$ %s" % (solutions)))
        else:
            pretty_print(HtmlFragment("Sústava nemá riešenie."))
</script></div>


<h2>Cramerovo pravidlo</h2>
<div>
    <p>Matici $A$ môžeme priradiť číslo, ktoré nazývame <b>determinant</b> matice $A$
        a označujeme ho <b>$|A|$</b></p>

        <div>
            \begin{equation} 
            |A| = 
            \left|
            \begin{array}{cccc} 
                a_{11} & a_{12} & \cdots & a_{1n} \\
                a_{21} & a_{22} & \cdots & a_{2n} \\
                \vdots & \vdots & \ddots & \vdots \\
                a_{n1} & a_{n2} & \cdots & a_{nn}
            \end{array}
            \right|
        \end{equation}
          </div>

          <p>$ A_i $ je matica, ktorá vznikne z matice sústavy $A$  tak, že $i$-tý stĺpec nahradíme stĺpcom pravých strán sústavy lineárnych rovníc </p>
          <div>
          Pre $i=1$:
	\begin{equation}
		A_1 = \left(\begin{array}{cccc} 
			b_1 & a_{12} & \dots & a_{1n} \\
			b_2 & a_{22} & \dots & a_{2n} \\
			\vdots & \vdots & \ddots & \vdots \\
			b_n & a_{n2} & \dots & a_{nn} \\
		\end{array}\right)
	\end{equation}
	
Z toho vyplýva, že:
	
	\begin{equation}
		|A_1| = \begin{array}{|cccc|} \label{eq:9}
			b_1 & a_{12} & \dots & a_{1n} \\
			b_2 & a_{22} & \dots & a_{2n} \\
			\vdots & \vdots & \ddots & \vdots \\
			b_n & a_{n2} & \dots & a_{nn} \\
		\end{array}
	\end{equation}

<p>Pre nájdenie riešenia sústavy lineárnych rovníc použijeme vzorec $x_i = \frac{\left| A_i \right|}{\left| A \right|}, i \in \mathbb{N}$</p>  
</div>
    </div>

<div class="compute">
<script type="text/x-sage">
from sage.misc.html import HtmlFragment

def center(M):
    nvars = M.ncols()
    latex_text = (
        r'$$\left(\begin{array}{%s}' % ('c' * nvars) +
        r'\\'.join(' & '.join('%s' % c for c in row) for row in M) +
        r'\end{array}\right)$$'
    )
    return HtmlFragment(latex_text)

def extended_matrix_as_latex(A):
    M = A[:, :-1]
    b = A.column(-1)
    nvars = M.ncols()
    display_text = (
        r'$$\left(\begin{array}{%s}' % ('r' * nvars + '|r') +
        r'\\'.join('%s&%s' % (
            ' & '.join('%s' % c for c in row),
            y) for row, y in zip(M, b)) +
        r'\end{array}\right)$$'
    )
    pretty_print(HtmlFragment(display_text))

pretty_print(HtmlFragment('<div style="text-align: center;">Zvoľte počet premenných (n)</div>'))
@interact
def _(n=slider(1, 10, 1, 3)):
    D = Integer(n)
    example = [[1 if k == j else 0 for k in range(D + 1)] for j in range(D)]
    example[0][-1] = 0
    example[-1][0] = 0
    pretty_print(HtmlFragment('<div style="text-align: center;">Zadajte koeficienty rozšírenej matice sústavy $(A|b)$</div>'))
    @interact
    def inner(A=input_grid(D, D + 1, default=example, label='$(A|b)$ =', to_value=matrix), auto_update=False):
        pretty_print(HtmlFragment('Rozšírená matica sústavy $(A|b)$'))
        extended_matrix_as_latex(A)
        det_A = A[:, :-1].det()

        if det_A != 0:
            A_P = A[:, :-1]
            A_Det = A_P.det()
            pretty_print(HtmlFragment('Matica sústavy $A$:'))
            pretty_print(HtmlFragment('$|A| = %s$' % A_Det))
            print()
            pretty_print(center(A_P))
            print()

            solutions = []
            for i in range(A_P.ncols()):
                A_temp = Matrix(A_P)
                A_temp[:, i] = A[:, -1]
                temp_det = A_temp.det()
                solutions.append(temp_det / A_Det)
                pretty_print(HtmlFragment("%s) $A_%s$ = matica, ktorá vznikne nahradením %s stĺpca v matici $A$ vektorom $b$, $|A_%s| = %s$:" % (i + 1, i + 1, i + 1,
                i + 1, temp_det)))
                print()
                pretty_print(center(A_temp))
                print()
                pretty_print(HtmlFragment(
                    "Koreň č.%s $=$ $\\frac{%s}{%s}$" % (i + 1, temp_det, A_Det)))

            pretty_print(HtmlFragment("Riešenie SLR $=$ %s" % (solutions)))
        else:
            pretty_print(HtmlFragment("$|A| = %s$:" % (det_A)))
            pretty_print(HtmlFragment("SLR nemá jednoznačné riešenie."))
</script>
</div>
    

<h2>Gaussova - Jordanova eliminačná metóda</h2>

<div>
    <p><strong>Frobeniova veta</strong> - sústava lineárnych rovníc má riešenie práve vtedy,  ak \(h(A) = h(A|b)\). V tom prípade:</p>
    <ul>
        <li>Ak \(h(A) = h(A|b) = n\) (počet neznámych v sústave), tak sústava má práve jedno riešenie.</li>
        <li>Ak \(h(A) = h(A|b) < n\), tak sústava má nekonečne veľa riešení.</li>
    </ul>
    <p>Ak \(h(A) \neq h(A|b)\) sústava nemá riešenie.</p>
</div>


<div class="compute"><script type="text/x-sage">

from sage.misc.html import HtmlFragment

def center(M):
    nvars = M.ncols()
    latex_text = (
        r'$$\left(\begin{array}{%s}' % ('c' * nvars) +
        r'\\'.join(' & '.join('%s' % c for c in row) for row in M) +
        r'\end{array}\right)$$'
    )
    return HtmlFragment(latex_text)

def extended_matrix_as_latex(A):
            M = A[:, :-1]
            b = A.column(-1)
            nvars = M.ncols()
            display_text = (
                r'$$\left(\begin{array}{%s}' % ('r' * nvars + '|r') +
                r'\\'.join('%s&%s' % (
                    ' & '.join('%s' % c for c in row),
                    y) for row, y in zip(M, b)) +
                r'\end{array}\right)$$'
            )
            pretty_print(HtmlFragment(display_text))
    
pretty_print(HtmlFragment('<div style="text-align: center;">Zvoľte počet premenných (n)</div>'))        
@interact
def _(n = slider(1,10,1,3)):
    D = Integer(n)
    pretty_print(HtmlFragment('<div style="text-align: center;">Zadajte koeficienty rozšírenej matice sústavy $(A|b)$</div>'))        
    example = [[1 if k == j else 0 for k in range(D+1)] for j in range(D)]
    example[0][-1] = 0
    example[-1][0] = 0
        
    @interact
    def inner(A=input_grid(D, D+1, default=example, label='$(A|b)$ =', to_value=matrix),auto_update=False):
            
        pretty_print(HtmlFragment('Rozšírená matica sústavy $(A|b)$'))
        extended_matrix_as_latex(A)
            
        rank_A = A.rank()
        #Výpočet hodnosti matice A_parametrov
        A_P = A[:, :-1]
        AR_P = A_P.rref()
        rank_A_P = A_P.rank()
    
        #Počet neznámych
        n_nez = A.ncols() - 1
        A_J = A.rref()
            
            
        if rank_A == rank_A_P:
            if rank_A < n_nez:               
                pretty_print(HtmlFragment('Upravená rozšírená matica sústavy po Gaussovej - Jordanovej eliminácii $(A|b)$:'))
                extended_matrix_as_latex(A_J)
                pretty_print(HtmlFragment('Matica $A$:'))
                pretty_print(center(AR_P))
                pretty_print(HtmlFragment("$h(A|b)=$ {}".format(rank_A)))
                pretty_print(HtmlFragment("$h(A)=$ {}".format(rank_A_P)))
                pretty_print(HtmlFragment("Na základe Frobeniovej vety má sústava nekonečne veľa riešení.")) 
            else:               
                solutions = []
                for i in range(A.ncols() - 1):
                    solutions.append(A_J[i, A.ncols() - 1])
                pretty_print(HtmlFragment('Upravená rozšírená matica sústavy po Gaussovej - Jordanovej eliminácii $(A|b)$:'))
                extended_matrix_as_latex(A_J)
                pretty_print(HtmlFragment('Matica $A$:'))
                pretty_print(center(AR_P))
                pretty_print(HtmlFragment("$h(A|b)=$ {}".format(rank_A)))
                pretty_print(HtmlFragment("$h(A)=$ {}".format(rank_A_P)))
                pretty_print(HtmlFragment("Riešenie SLR: {}".format(solutions))) 
                    
        else:           
                pretty_print(HtmlFragment('Upravená rozšírená matica sústavy po Gaussovej - Jordanovej eliminácii $(A|b)$:'))
                extended_matrix_as_latex(A_J)
                pretty_print(HtmlFragment('Matica $A$:'))
                pretty_print(center(AR_P))
                pretty_print(HtmlFragment("$h(A|b)=$ {}".format(rank_A)))
                pretty_print(HtmlFragment("$h(A)=$ {}".format(rank_A_P)))
                pretty_print(HtmlFragment("Na základe Frobeniovej vety sústava nemá riešenie."))      
</script></div>

</div>

<footer>
    <p>2024 | Technická univerzita v Košiciach FEI KEMT | Maksym Perenchuk</p>
</footer>

</body>
</html>